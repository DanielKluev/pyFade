************* Module py_fade.features_checker
py_fade/features_checker.py:64:0: C0301: Line too long (124/100) (line-too-long)
py_fade/features_checker.py:62:12: C0415: Import outside toplevel (sqlcipher3) (import-outside-toplevel)
************* Module py_fade.controllers.text_generation_controller
py_fade/controllers/text_generation_controller.py:160:85: C0303: Trailing whitespace (trailing-whitespace)
py_fade/controllers/text_generation_controller.py:164:81: C0303: Trailing whitespace (trailing-whitespace)
py_fade/controllers/text_generation_controller.py:176:0: C0301: Line too long (105/100) (line-too-long)
py_fade/controllers/text_generation_controller.py:190:0: C0301: Line too long (101/100) (line-too-long)
py_fade/controllers/text_generation_controller.py:257:0: C0301: Line too long (106/100) (line-too-long)
py_fade/controllers/text_generation_controller.py:226:13: W0511: XXX: handle case when prefix is "", i.e. we need very first token logprobs. (fixme)
py_fade/controllers/text_generation_controller.py:142:4: R0917: Too many positional arguments (7/5) (too-many-positional-arguments)
************* Module py_fade.dataset.completion_logprobs
py_fade/dataset/completion_logprobs.py:34:78: C0303: Trailing whitespace (trailing-whitespace)
py_fade/dataset/completion_logprobs.py:18:0: R0903: Too few public methods (1/2) (too-few-public-methods)
************* Module py_fade.dataset.data_filter
py_fade/dataset/data_filter.py:4:0: R0903: Too few public methods (1/2) (too-few-public-methods)
************* Module py_fade.dataset.dataset
py_fade/dataset/dataset.py:24:0: C0412: Imports from package py_fade are not grouped (ungrouped-imports)
************* Module py_fade.dataset.tag
py_fade/dataset/tag.py:177:0: C0301: Line too long (107/100) (line-too-long)
************* Module py_fade.providers.llm_response
py_fade/providers/llm_response.py:65:92: C0303: Trailing whitespace (trailing-whitespace)
py_fade/providers/llm_response.py:70:94: C0303: Trailing whitespace (trailing-whitespace)
py_fade/providers/llm_response.py:71:0: C0301: Line too long (104/100) (line-too-long)
************* Module py_fade.providers.llama_cpp
py_fade/providers/llama_cpp.py:171:68: C0303: Trailing whitespace (trailing-whitespace)
py_fade/providers/llama_cpp.py:174:0: C0301: Line too long (111/100) (line-too-long)
py_fade/providers/llama_cpp.py:268:0: C0301: Line too long (108/100) (line-too-long)
py_fade/providers/llama_cpp.py:292:64: C0303: Trailing whitespace (trailing-whitespace)
py_fade/providers/llama_cpp.py:325:0: C0301: Line too long (113/100) (line-too-long)
py_fade/providers/llama_cpp.py:357:0: C0301: Line too long (223/100) (line-too-long)
py_fade/providers/llama_cpp.py:380:0: C0301: Line too long (141/100) (line-too-long)
py_fade/providers/llama_cpp.py:382:0: C0301: Line too long (101/100) (line-too-long)
py_fade/providers/llama_cpp.py:16:0: C0413: Import "from py_fade.providers.base_provider import LOGPROB_LEVEL_TOP_LOGPROBS, BasePrefillAwareProvider" should be placed at the top of the module (wrong-import-position)
py_fade/providers/llama_cpp.py:20:0: C0413: Import "from py_fade.providers.llm_response import LLMPTokenLogProbs, LLMResponse" should be placed at the top of the module (wrong-import-position)
py_fade/providers/llama_cpp.py:27:7: W0718: Catching too general exception Exception (broad-exception-caught)
py_fade/providers/llama_cpp.py:23:4: E0401: Unable to import 'llama_cpp' (import-error)
py_fade/providers/llama_cpp.py:24:4: E0401: Unable to import 'llama_cpp' (import-error)
py_fade/providers/llama_cpp.py:65:4: R0917: Too many positional arguments (7/5) (too-many-positional-arguments)
py_fade/providers/llama_cpp.py:116:15: W0718: Catching too general exception Exception (broad-exception-caught)
************* Module py_fade.providers.mock_provider
py_fade/providers/mock_provider.py:127:4: R0917: Too many positional arguments (6/5) (too-many-positional-arguments)
py_fade/providers/mock_provider.py:375:4: R0917: Too many positional arguments (6/5) (too-many-positional-arguments)
py_fade/providers/mock_provider.py:377:8: W0613: Unused argument 'default_model_id' (unused-argument)
************* Module py_fade.providers.ollama
py_fade/providers/ollama.py:144:78: C0303: Trailing whitespace (trailing-whitespace)
py_fade/providers/ollama.py:185:0: C0301: Line too long (116/100) (line-too-long)
py_fade/providers/ollama.py:13:0: R0903: Too few public methods (1/2) (too-few-public-methods)
py_fade/providers/ollama.py:165:27: E1101: Generator 'generator' has no 'message' member (no-member)
************* Module py_fade.providers.providers_manager
py_fade/providers/providers_manager.py:117:0: C0301: Line too long (104/100) (line-too-long)
py_fade/providers/providers_manager.py:140:0: C0301: Line too long (111/100) (line-too-long)
py_fade/providers/providers_manager.py:149:0: C0301: Line too long (114/100) (line-too-long)
py_fade/providers/providers_manager.py:18:58: E0602: Undefined variable 'is_llama_cpp_available' (undefined-variable)
py_fade/providers/providers_manager.py:93:4: C0116: Missing function or method docstring (missing-function-docstring)
py_fade/providers/providers_manager.py:116:24: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
py_fade/providers/providers_manager.py:121:24: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
py_fade/providers/providers_manager.py:128:24: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
py_fade/providers/providers_manager.py:132:19: E0602: Undefined variable 'is_llama_cpp_available' (undefined-variable)
py_fade/providers/providers_manager.py:139:20: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
py_fade/providers/providers_manager.py:143:4: C0116: Missing function or method docstring (missing-function-docstring)
py_fade/providers/providers_manager.py:145:12: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
py_fade/providers/providers_manager.py:148:12: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
py_fade/providers/providers_manager.py:166:8: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
py_fade/providers/providers_manager.py:168:4: C0116: Missing function or method docstring (missing-function-docstring)
py_fade/providers/providers_manager.py:171:4: C0116: Missing function or method docstring (missing-function-docstring)
py_fade/providers/providers_manager.py:7:0: W0611: Unused IS_LLAMA_CPP_AVAILABLE imported from py_fade.providers.llama_cpp (unused-import)
************* Module py_fade.providers.base_provider
py_fade/providers/base_provider.py:13:7: W0718: Catching too general exception Exception (broad-exception-caught)
py_fade/providers/base_provider.py:72:38: W0613: Unused argument 'model_id' (unused-argument)
************* Module py_fade.gui.widget_facet
py_fade/gui/widget_facet.py:1:0: C0114: Missing module docstring (missing-module-docstring)
py_fade/gui/widget_facet.py:266:15: W0718: Catching too general exception Exception (broad-exception-caught)
py_fade/gui/widget_facet.py:306:19: W0718: Catching too general exception Exception (broad-exception-caught)
************* Module py_fade.gui.widget_navigation_sidebar
py_fade/gui/widget_navigation_sidebar.py:35:0: C0301: Line too long (122/100) (line-too-long)
py_fade/gui/widget_navigation_sidebar.py:101:0: C0301: Line too long (124/100) (line-too-long)
py_fade/gui/widget_navigation_sidebar.py:102:0: C0301: Line too long (106/100) (line-too-long)
py_fade/gui/widget_navigation_sidebar.py:189:0: C0301: Line too long (113/100) (line-too-long)
py_fade/gui/widget_navigation_sidebar.py:70:8: C0415: Import outside toplevel (PyQt6.QtWidgets.QLineEdit) (import-outside-toplevel)
py_fade/gui/widget_navigation_sidebar.py:139:37: W0613: Unused argument 'column' (unused-argument)
py_fade/gui/widget_navigation_sidebar.py:217:12: W0104: Statement seems to have no effect (pointless-statement)
py_fade/gui/widget_navigation_sidebar.py:208:31: W0613: Unused argument 'data_filter' (unused-argument)
py_fade/gui/widget_navigation_sidebar.py:280:36: W0613: Unused argument 'data_filter' (unused-argument)
py_fade/gui/widget_navigation_sidebar.py:280:61: W0613: Unused argument 'dataset' (unused-argument)
************* Module py_fade.gui.widget_completion
py_fade/gui/widget_completion.py:99:0: C0301: Line too long (105/100) (line-too-long)
py_fade/gui/widget_completion.py:103:0: C0301: Line too long (121/100) (line-too-long)
py_fade/gui/widget_completion.py:109:0: C0301: Line too long (132/100) (line-too-long)
py_fade/gui/widget_completion.py:115:0: C0301: Line too long (123/100) (line-too-long)
py_fade/gui/widget_completion.py:124:0: C0301: Line too long (101/100) (line-too-long)
py_fade/gui/widget_completion.py:8:0: W0611: Unused QSize imported from PyQt6.QtCore (unused-import)
************* Module py_fade.gui.widget_tag
py_fade/gui/widget_tag.py:323:0: C0301: Line too long (107/100) (line-too-long)
py_fade/gui/widget_tag.py:298:15: W0718: Catching too general exception Exception (broad-exception-caught)
py_fade/gui/widget_tag.py:338:15: W0718: Catching too general exception Exception (broad-exception-caught)
************* Module py_fade.gui.widget_new_completion
py_fade/gui/widget_new_completion.py:108:0: C0301: Line too long (134/100) (line-too-long)
py_fade/gui/widget_new_completion.py:123:0: C0301: Line too long (130/100) (line-too-long)
py_fade/gui/widget_new_completion.py:117:12: W0511: TODO: Implement step-by-step generation (fixme)
py_fade/gui/widget_new_completion.py:1:0: C0114: Missing module docstring (missing-module-docstring)
py_fade/gui/widget_new_completion.py:48:4: C0116: Missing function or method docstring (missing-function-docstring)
************* Module py_fade.gui.widget_launcher
py_fade/gui/widget_launcher.py:345:15: W0718: Catching too general exception Exception (broad-exception-caught)
py_fade/gui/widget_launcher.py:400:15: W0718: Catching too general exception Exception (broad-exception-caught)
************* Module py_fade.gui.widget_export_template
py_fade/gui/widget_export_template.py:377:0: C0301: Line too long (101/100) (line-too-long)
py_fade/gui/widget_export_template.py:645:0: C0325: Unnecessary parens after 'not' keyword (superfluous-parens)
py_fade/gui/widget_export_template.py:804:0: C0301: Line too long (109/100) (line-too-long)
py_fade/gui/widget_export_template.py:382:11: R1716: Simplify chained comparison between the operands (chained-comparison)
py_fade/gui/widget_export_template.py:385:4: C0116: Missing function or method docstring (missing-function-docstring)
py_fade/gui/widget_export_template.py:394:4: C0116: Missing function or method docstring (missing-function-docstring)
py_fade/gui/widget_export_template.py:581:19: W0718: Catching too general exception Exception (broad-exception-caught)
py_fade/gui/widget_export_template.py:730:15: W0718: Catching too general exception Exception (broad-exception-caught)
py_fade/gui/widget_export_template.py:768:15: W0718: Catching too general exception Exception (broad-exception-caught)
py_fade/gui/widget_export_template.py:795:15: W0718: Catching too general exception Exception (broad-exception-caught)
py_fade/gui/widget_export_template.py:811:4: C0116: Missing function or method docstring (missing-function-docstring)
************* Module py_fade.gui.components.widget_button_with_icon
py_fade/gui/components/widget_button_with_icon.py:16:0: C0301: Line too long (121/100) (line-too-long)
py_fade/gui/components/widget_button_with_icon.py:16:4: R0917: Too many positional arguments (6/5) (too-many-positional-arguments)
************* Module py_fade.gui.components.widget_label_with_icon
py_fade/gui/components/widget_label_with_icon.py:19:0: C0301: Line too long (148/100) (line-too-long)
py_fade/gui/components/widget_label_with_icon.py:23:0: C0301: Line too long (112/100) (line-too-long)
py_fade/gui/components/widget_label_with_icon.py:48:0: C0301: Line too long (129/100) (line-too-long)
py_fade/gui/components/widget_label_with_icon.py:60:103: C0303: Trailing whitespace (trailing-whitespace)
py_fade/gui/components/widget_label_with_icon.py:60:0: C0301: Line too long (103/100) (line-too-long)
py_fade/gui/components/widget_label_with_icon.py:19:4: R0917: Too many positional arguments (7/5) (too-many-positional-arguments)
py_fade/gui/components/widget_label_with_icon.py:48:4: R0917: Too many positional arguments (7/5) (too-many-positional-arguments)
************* Module py_fade.gui.components.widget_completion_rating
py_fade/gui/components/widget_completion_rating.py:10:0: C0301: Line too long (119/100) (line-too-long)
py_fade/gui/components/widget_completion_rating.py:270:0: C0301: Line too long (114/100) (line-too-long)
py_fade/gui/components/widget_completion_rating.py:274:0: C0301: Line too long (102/100) (line-too-long)
py_fade/gui/components/widget_completion_rating.py:10:0: W0611: Unused QFrame imported from PyQt6.QtWidgets (unused-import)
py_fade/gui/components/widget_completion_rating.py:10:0: W0611: Unused QStyleOptionToolButton imported from PyQt6.QtWidgets (unused-import)
py_fade/gui/components/widget_completion_rating.py:10:0: W0611: Unused QToolButton imported from PyQt6.QtWidgets (unused-import)
************* Module py_fade.gui.components.widget_token_picker
py_fade/gui/components/widget_token_picker.py:26:0: C0301: Line too long (114/100) (line-too-long)
py_fade/gui/components/widget_token_picker.py:29:0: C0301: Line too long (136/100) (line-too-long)
py_fade/gui/components/widget_token_picker.py:49:0: C0301: Line too long (113/100) (line-too-long)
py_fade/gui/components/widget_token_picker.py:55:8: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
************* Module py_fade.gui.auxillary.aux_logprobs_to_color
py_fade/gui/auxillary/aux_logprobs_to_color.py:1:0: C0114: Missing module docstring (missing-module-docstring)
py_fade/gui/auxillary/aux_logprobs_to_color.py:5:0: R1710: Either all return statements in a function should return an expression, or none of them should. (inconsistent-return-statements)
************* Module py_fade.gui.auxillary
py_fade/gui/auxillary/__init__.py:1:0: C0114: Missing module docstring (missing-module-docstring)
py_fade/gui/auxillary/__init__.py:1:0: C0414: Import alias does not rename original package (useless-import-alias)
py_fade/gui/auxillary/__init__.py:2:0: C0414: Import alias does not rename original package (useless-import-alias)
************* Module py_fade.gui.auxillary.__init__
py_fade/gui/auxillary/__init__.py:1:0: R0801: Similar lines in 2 files
==py_fade.gui.widget_facet:[221:239]
==py_fade.gui.widget_tag:[261:279]
        if errors:
            self.validation_label.setText("\n".join(errors))
            self.validation_label.show()
            self.save_button.setEnabled(False)
        else:
            self.validation_label.hide()
            self.save_button.setEnabled(True)

    def save_tag(self) -> None:
        """Persist the current form data to the dataset."""

        if not self.dataset.session:
            raise RuntimeError(
                "Dataset session is not initialized. Call dataset.initialize() first."
            )

        name = self.name_field.text().strip()
        description = self.description_field.toPlainText().strip() (duplicate-code)
py_fade/gui/auxillary/__init__.py:1:0: R0801: Similar lines in 2 files
==py_fade.providers.llama_cpp:[227:237]
==py_fade.providers.ollama:[172:182]
        return LLMResponse(
            model_id=model_id,
            full_history=history,
            full_response_text=full_response_text,
            response_text=response_content,
            temperature=temperature,
            top_k=top_k,
            prefill=prefill,
            context_length=context_length,
            max_tokens=max_tokens, (duplicate-code)
py_fade/gui/auxillary/__init__.py:1:0: R0801: Similar lines in 2 files
==py_fade.gui.widget_export_template:[604:616]
==py_fade.gui.widget_tag:[258:272]
            except ValueError as exc:
                errors.append(str(exc))

        if errors:
            self.validation_label.setText("\n".join(errors))
            self.validation_label.show()
            self.save_button.setEnabled(False)
        else:
            self.validation_label.hide()
            self.save_button.setEnabled(True)

    def _collect_selected_models(self) -> list[str]: (duplicate-code)
py_fade/gui/auxillary/__init__.py:1:0: R0801: Similar lines in 2 files
==py_fade.gui.widget_facet:[150:160]
==py_fade.gui.widget_tag:[174:184]
        self.cancel_button = QPushButtonWithIcon("cancel", "Cancel")
        self.cancel_button.setStyleSheet(
            "QPushButton { background-color: #757575; color: white; padding: 8px 16px; }"
        )
        self.cancel_button.clicked.connect(self.cancel_editing)

        self.delete_button = QPushButtonWithIcon("delete", "Delete")
        self.delete_button.setStyleSheet(
            "QPushButton { background-color: #d32f2f; color: white; padding: 8px 16px; }"
        ) (duplicate-code)
py_fade/gui/auxillary/__init__.py:1:0: R0801: Similar lines in 2 files
==py_fade.providers.llama_cpp:[232:249]
==py_fade.providers.mock_provider:[439:456]
            temperature=temperature,
            top_k=top_k,
            prefill=prefill,
            context_length=context_length,
            max_tokens=max_tokens,
            logprobs=logprobs,
            is_truncated=is_truncated,
            beam_token=kwargs.get("beam_token", None),
        )

    def evaluate_completion(
        self, model_id: str, prompt: str, completion: str, **kwargs
    ) -> list[LLMPTokenLogProbs]:
        """
        Evaluate a given completion for given prompt by bound model.
        Returns list of LLMPTokenLogProbs for each token in completion.
        """ (duplicate-code)
py_fade/gui/auxillary/__init__.py:1:0: R0801: Similar lines in 2 files
==py_fade.gui.widget_export_template:[607:616]
==py_fade.gui.widget_facet:[221:231]
        if errors:
            self.validation_label.setText("\n".join(errors))
            self.validation_label.show()
            self.save_button.setEnabled(False)
        else:
            self.validation_label.hide()
            self.save_button.setEnabled(True)

    def save_facet(self):
        """Save the current facet to the database.""" (duplicate-code)
py_fade/gui/auxillary/__init__.py:1:0: R0801: Similar lines in 2 files
==py_fade.gui.widget_facet:[200:208]
==py_fade.gui.widget_tag:[233:240]
        if not name:
            errors.append("Name is required")
        elif len(name) < 2:
            errors.append("Name must be at least 2 characters")
        elif len(name) > 100:
            errors.append("Name must be less than 100 characters")
        else:
            # Check for duplicate names (excluding current facet if editing) (duplicate-code)
py_fade/gui/auxillary/__init__.py:1:0: R0801: Similar lines in 2 files
==py_fade.dataset.facet:[70:79]
==py_fade.dataset.tag:[75:83]
        if not dataset.session:
            raise RuntimeError(
                "Dataset session is not initialized. Call dataset.initialize() first."
            )

        query = dataset.session.query(cls)
        if order_by_date:
            query = query.order_by(desc(cls.date_created))
 (duplicate-code)
py_fade/gui/auxillary/__init__.py:1:0: R0801: Similar lines in 2 files
==py_fade.dataset.facet:[23:30]
==py_fade.dataset.tag:[24:31]
    id: Mapped[int] = mapped_column(primary_key=True, autoincrement=True)
    name: Mapped[str] = mapped_column(String, nullable=False, unique=True)
    description: Mapped[str] = mapped_column(String, nullable=False)
    total_samples: Mapped[int] = mapped_column(Integer, nullable=False, default=0)
    date_created: Mapped[datetime.datetime] = mapped_column(
        DateTime, nullable=False, default=datetime.datetime.now
    ) (duplicate-code)
py_fade/gui/auxillary/__init__.py:1:0: R0801: Similar lines in 2 files
==py_fade.gui.widget_facet:[141:148]
==py_fade.gui.widget_tag:[165:172]
        button_layout = QHBoxLayout()
        button_layout.setSpacing(8)

        self.save_button = QPushButtonWithIcon("save", "Save")
        self.save_button.setStyleSheet(
            "QPushButton { background-color: #1976D2; color: white; padding: 8px 16px; }"
        ) (duplicate-code)
py_fade/gui/auxillary/__init__.py:1:0: R0801: Similar lines in 2 files
==py_fade.gui.widget_facet:[176:181]
==py_fade.gui.widget_tag:[201:206]
            self.name_field.setText("")
            self.description_field.setPlainText("")
            self.total_samples_field.setText("0")
            self.date_created_field.setText("Will be set on save")
            self.delete_button.hide() (duplicate-code)
py_fade/gui/auxillary/__init__.py:1:0: R0801: Similar lines in 2 files
==py_fade.gui.widget_facet:[162:171]
==py_fade.gui.widget_tag:[186:196]
        button_layout.addWidget(self.save_button)
        button_layout.addWidget(self.cancel_button)
        button_layout.addStretch()
        button_layout.addWidget(self.delete_button)

        main_layout.addLayout(button_layout)

    def set_facet(self, facet: "Facet | None"):
        """Set the facet data and populate UI components.""" (duplicate-code)
py_fade/gui/auxillary/__init__.py:1:0: R0801: Similar lines in 2 files
==py_fade.gui.widget_facet:[132:138]
==py_fade.gui.widget_tag:[156:162]
        self.validation_label = QLabel()
        self.validation_label.setStyleSheet("color: #d32f2f; font-size: 12px;")
        self.validation_label.setWordWrap(True)
        self.validation_label.hide()
        main_layout.addWidget(self.validation_label)
 (duplicate-code)
py_fade/gui/auxillary/__init__.py:1:0: R0801: Similar lines in 2 files
==py_fade.providers.mock_provider:[439:444]
==py_fade.providers.ollama:[177:182]
            temperature=temperature,
            top_k=top_k,
            prefill=prefill,
            context_length=context_length,
            max_tokens=max_tokens, (duplicate-code)

------------------------------------------------------------------
Your code has been rated at 9.72/10 (previous run: 9.18/10, +0.55)

